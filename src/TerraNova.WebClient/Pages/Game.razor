@page "/"
@inject IJSRuntime JS
@implements IAsyncDisposable

<canvas id="gameCanvas" width="800" height="600"></canvas>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
      if (firstRender)
      {
        var success = await JS.InvokeAsync<bool>("terraNova.init", "gameCanvas");

        if (success)
        {
          await JS.InvokeVoidAsync("terraNova.setViewport", 800, 600);

          await JS.InvokeVoidAsync("terraNova.startRenderLoop");
        }
      }
    }

    [JSInvokable]
    public void OnUpdate()
    {
    }

    public async ValueTask DisposeAsync()
    {
      await JS.InvokeVoidAsync("terraNova.stopRenderLoop");
    }
  }
