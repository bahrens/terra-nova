@page "/"
@inject IJSRuntime JS

<canvas id="gameCanvas" width="800" height="600"></canvas>

@code {
    private IJSInProcessRuntime? jsRuntime;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
      if (firstRender)
      {
        jsRuntime = (IJSInProcessRuntime)JS;

        var success = await JS.InvokeAsync<bool>("terraNova.init", "gameCanvas");

        if (success)
        {
          jsRuntime.InvokeVoid("terraNova.setViewport", 800, 600);

          RenderFrame();
        }
      }
    }

    private void RenderFrame()
    {
      jsRuntime?.InvokeVoid("terraNova.clear", 0.2f, 0.4f, 0.8f, 1.0f);
    }
  }
